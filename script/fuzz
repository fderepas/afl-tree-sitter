#!/bin/bash
#/ Usage: script/fuzz language
#/
#/ Fuzz a tree-sitter.
#/
#/ Examples:
#/  script/fuzz ruby
#/  script/fuzz javascript

set -e
[ $# -eq 0 ] && set -- --help

if [[ $1 = -h || $1 = --help ]]; then
  grep ^#/ <"$0" |cut -c4-
  exit
fi

lang=$1

afl-fuzz -d -i afl_in/$lang -o afl_out/$lang -t 1000 -x dictionaries/$lang.dict ./afl-$lang @@
